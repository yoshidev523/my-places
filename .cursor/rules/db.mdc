---
description: 
globs: supabase/migrations/*.sql
alwaysApply: false
---
# 要約
DBモデルのルールについてまとめた資料である。

# ルール

## テーブル命名規則
- スネークケースでテーブルを命名する

## 主キー設計
- テーブルの主キーカラムは「**id**」
  - 例：テーブル名がmst_userの場合、主キーカラムは`id`
- テーブルの主キーIDの型はincrement型を利用する（sortしやすいため）

## 外部キー設計
- 正規化して親テーブルがある場合、主キーは「**id**」とする

  **親テーブル例：**
  | 親テーブル名 | mst_user |
  | --- | --- |
  | 親テーブルカラム名 | id |
  | データ型 | integer |

- 正規化して親テーブルがある場合、主キーは「**id**」はインクリメントInteger型を選択する

  **親テーブル：**
  | 親テーブル名 | user |
  | --- | --- |
  | 親テーブルカラム名 | id |
  | データ型 | integer |

  **子テーブル：**
  | 参照テーブル名 | manager |
  | --- | --- |
  | 参照列 | id |
  | データ型 | integer |

## カラム命名規則
- カラム名はスネークケースで命名する
  - 例：`updated_at`

## 制約名命名規則
- 主キー名は「**テーブル名_カラム名_pk**」とする
- 外部キー名は「**元テーブル名_元テーブルカラム_参照テーブル名_参照列_fk**」とする
  - ただし外部キーは極力つけない
- 列名が同じ場合の外部キー名は「**元テーブル名_元テーブルカラム_参照テーブル名_参照列_fk**」とする

  **外部キー名の例：**
  | 元テーブル名 | mst_user |
  | --- | --- |
  | 元テーブルカラム名 | id |
  | 参照テーブル名 | mst_manager |
  | 参照列 | manager_id |

  → **user_id_mst_manager_manager_id_fk**